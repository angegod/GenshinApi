(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[788],{5194:(e,s,l)=>{Promise.resolve().then(l.bind(l,6313))},6313:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>b});var a=l(5155),t=l(2115),i=l(2197),r=l(5736),x=l(4422),n=l(2224),c=l(1296),d=l(6719),o=l(9779),m=l(9194),h=l(8326),f=l(5424);l(1209);let u=function(){return(0,a.jsxs)("div",{className:"flex flex-col max-w-[230px] ",children:[(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"text-white font-bold text-md",children:"使用方法"})}),(0,a.jsxs)("div",{className:"[&>span]:text-stone-400 flex flex-col",children:[(0,a.jsx)("span",{children:"根據聖遺物現有狀況"}),(0,a.jsx)("span",{children:"依序輸入詞條種類、詞條數值、強化次數以及是否指定"}),(0,a.jsx)("span",{className:"!text-yellow-500",children:"詞條數值不用輸入%"}),(0,a.jsx)("span",{className:"!text-yellow-500",children:"如果該詞條沒有被強化過，則強化次數打上0即可"})]}),(0,a.jsxs)("div",{className:"mt-2 [&>span]:text-stone-400 flex flex-col",children:[(0,a.jsx)("span",{children:"例如:今天有一個詞條為"}),(0,a.jsx)("span",{className:"!text-green-500",children:"暴擊傷害,數值13.4%,強化次數2"}),(0,a.jsx)("span",{children:"那麼只要依序key上"}),(0,a.jsx)("span",{className:"!text-green-500",children:"暴擊傷害 13.4 2"})]}),(0,a.jsxs)("div",{className:"mt-2 [&>span]:text-stone-400 flex flex-col",children:[(0,a.jsx)("span",{children:"每個詞條最右側都有勾選框"}),(0,a.jsx)("span",{className:"text-yellow-400",children:"現有遊戲重洗規定必須選定兩個詞條，這兩個詞條會享有保底強化次數"})]}),(0,a.jsxs)("div",{className:"mt-2 flex flex-col",children:[(0,a.jsx)("span",{className:"text-white font-bold text-md",children:"注意事項:"}),(0,a.jsx)("span",{className:"text-red-500",children:"1.副詞條彼此間不能重複"}),(0,a.jsx)("span",{className:"text-red-500",children:"2.主詞條跟副詞條不可重複"}),(0,a.jsx)("span",{className:"text-red-500",children:"3.指定共享保底副詞條必為2個"})]})]})},p=function(){return(0,a.jsxs)("div",{className:"w-[300px] flex flex-col max-[600px]:my-3",children:[(0,a.jsx)("h2",{className:"text-red-600 font-bold text-lg",children:"使用說明"}),(0,a.jsxs)("ul",{className:"[&>li]:text-stone-400 list-decimal [&>li]:ml-2 max-[400px]:[&>li]:text-sm",children:[(0,a.jsx)("li",{children:"此工具主要目的是給予一些想要重洗聖遺物詞條的人參考"}),(0,a.jsx)("li",{children:"翻盤機率是指說該聖遺物透過啟聖之塵道具後聖遺物評分變高的機率為何"}),(0,a.jsx)("li",{children:"目前該工具只支援計算五星強化至滿等聖遺物"}),(0,a.jsx)("li",{children:"此工具相關數據、算法及操作功能仍有更改的可能，敬請見諒!"}),(0,a.jsxs)("li",{children:["操作說明可以參考",(0,a.jsx)("a",{href:"https://home.gamer.com.tw/artwork.php?sn=6191675",className:"!underline",children:"這篇"})]})]})]})};var j=l(5523),v=l(4167),N=l(4585),w=l(3789);let S=function(){let e="GenshinSimulatorData",[s,S]=(0,t.useState)(null),[b,g]=(0,t.useState)(void 0),[y,I]=(0,t.useState)(),[A,C]=(0,t.useState)([]),H=["生之花","死之羽","時之沙","空之杯","理之冠"],[k,D]=(0,t.useState)(!1),[_,F]=(0,t.useState)(!0),[O,P]=(0,t.useState)(void 0),[R,T]=(0,t.useState)(void 0),[E,M]=(0,t.useState)({label:void 0,tag:void 0,color:void 0,value:void 0}),[J,L]=(0,t.useState)(!0),W=(0,t.useRef)([]),[B,X]=(0,t.useState)(void 0),{showStatus:$,updateStatus:q,hideStatus:G}=(0,x.Z)(),[Q,z]=(0,t.useState)([]),[U,V]=(0,t.useState)(),[Y,Z]=(0,t.useState)(2),K=(0,t.useRef)(2),{setHistory:ee,getHistory:es,addHistory:el,deleteHistory:ea,limitHistory:et}=(0,m.A)(),ei=(0,N.A)(e=>e.openWindow),[er,ex]=(0,t.useState)(!1);(0,t.useEffect)(()=>{$("正在載入過往紀錄中......","process");let s=[];for(var l=0;l<=3;l++){let e={index:l,subaffix:"",data:0,count:0,isSelect:!1};s.push(e)}C(s);let a=JSON.parse(localStorage.getItem(e));ee(a||[]),null!=a&&a.length>0?(a=a.filter(e=>1.2===e.version),localStorage.setItem("HistoryData",JSON.stringify(a)),ee(a),q("先前紀錄已匯入!!","success")):q("尚未有任何操作紀錄!!","default"),ex(!0)},[]);let en={partArr:H,SubData:A,MainSelectOptions:y,isChangeAble:_,isSaveAble:k,partsIndex:b,standDetails:W.current,selfStand:Q,charID:s,isLoad:er,Rrank:E,Rscore:R,relic:U,ExpRate:O,PieNums:B,limit:K.current,mode:"Simulator",button:!0,checkDetails:function(e){let s=es(e),l=null;s&&!Array.isArray(s)&&"part"in s&&(l=s),l&&(M(l.rank),P(l.expRate),T(l.score.toString()),q("資料替換完畢!!","success"),X(l.pieData),W.current=l.stand,K.current=l.limit,V(l.relic),requestAnimationFrame(()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}))},deleteHistoryData:function(s){if(!confirm("確定要刪除紀錄嗎?"))return;ea(s);let l=es();localStorage.setItem(e,JSON.stringify(l))},setCharID:S,setMainSelectOptions:I,setPartsIndex:g,setIsChangeAble:F,setIsSaveAble:D,setSelfStand:z,setSubData:C};return(0,a.jsxs)(o.A.Provider,{value:en,children:[(0,a.jsx)("div",{className:"flex flex-col w-4/5 mx-auto max-[600px]:w-[95%]",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"rowWrap max-[600px]:w-[95%]",children:[(0,a.jsxs)("div",{className:"w-2/5 SectionBg rounded-md max-[1200px]:w-full",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center ml-2 mt-2",children:[(0,a.jsx)("span",{className:"text-2xl text-red-500 font-bold",children:"手動輸入"}),(0,a.jsx)("div",{className:"hintIcon ml-2 overflow-visible","data-tooltip-id":"SimulatorHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})}),(0,a.jsxs)("div",{className:"flex flex-row relative ml-auto mr-3",onClick:()=>ei(),children:[(0,a.jsx)("img",{src:"".concat("/GenshinApi","/image/breakingNews.svg"),alt:"icon"}),(0,a.jsx)("span",{className:"text-white underline cursor-pointer",children:"最新更新"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col px-2",children:[(0,a.jsxs)("div",{className:"flex flex-row my-3 items-center max-[400px]:!flex-col max-[600px]:items-baseline",children:[(0,a.jsx)("div",{className:"SimulatorFlex",children:(0,a.jsx)("span",{className:"SubTitle",children:"Char 腳色:"})}),(0,a.jsxs)("div",{className:"ml-1 flex flex-row items-center",children:[(0,a.jsx)(i.zj,{}),(0,a.jsx)("div",{className:"hintIcon ml-1 overflow-visible","data-tooltip-id":"CharHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]})]}),(0,a.jsxs)("div",{className:"flex flex-row my-3 max-[400px]:!flex-col",children:[(0,a.jsx)("div",{className:"SimulatorFlex",children:(0,a.jsx)("span",{className:"SubTitle",children:"Parts 部位:"})}),(0,a.jsx)("div",{className:"ml-1",children:(0,a.jsx)(i.q2,{})})]}),void 0!==b?(0,a.jsxs)("div",{className:"flex flex-row my-3 max-[400px]:!flex-col",children:[(0,a.jsx)("div",{className:"SimulatorFlex",children:(0,a.jsx)("span",{className:"SubTitle",children:"Main 主詞條:"})}),(0,a.jsx)("div",{className:"ml-1",children:(0,a.jsx)(i.Q2,{})})]}):null,y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-row my-3 max-[600px]:flex-wrap max-[400px]:!flex-col",children:[(0,a.jsx)("div",{className:"SimulatorFlex",children:(0,a.jsx)("span",{className:"SubTitle",children:"Sub 副詞條:"})}),(0,a.jsxs)("div",{className:"flex flex-row max-[600px]:mx-auto",children:[(0,a.jsx)(()=>(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(i.$X,{index:0}),(0,a.jsx)(i.$X,{index:1}),(0,a.jsx)(i.$X,{index:2}),(0,a.jsx)(i.$X,{index:3})]}),{}),(0,a.jsx)("div",{className:"hintIcon ml-2 overflow-visible","data-tooltip-id":"SubAffixHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]})]}),(0,a.jsxs)("div",{className:"flex flex-row my-3 items-center max-[400px]:!flex-col max-[600px]:items-baseline",children:[(0,a.jsx)("div",{className:"SimulatorFlex",children:(0,a.jsx)("span",{className:"SubTitle",children:"Affix 有效詞條:"})}),(0,a.jsx)(i.mM,{})]}),(0,a.jsxs)("div",{className:"flex flex-row my-3 max-[400px]:!flex-col",children:[(0,a.jsx)("div",{className:"SimulatorFlex",children:(0,a.jsx)("span",{className:"SubTitle",children:"Limit 保底次數:"})}),(0,a.jsxs)("div",{className:"pl-1 flex flex-row items-center",children:[(0,a.jsx)("input",{type:"text-white",className:"bgInput w-[40px] text-center",onChange:e=>{isNaN(parseInt(e.target.value))||Z(parseInt(e.target.value))},defaultValue:2,max:4}),(0,a.jsx)("div",{className:"hintIcon ml-1 overflow-visible","data-tooltip-id":"LimitHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]})]})]}):null,Q&&0!==Q.length?(0,a.jsxs)("div",{className:"mt-2 [&>*]:mr-2 flex flex-row max-[400px]:!flex-col ".concat(0===Q.length?"hidden":""," max-[400px]:!flex-col"),children:[(0,a.jsx)("div",{className:"SimulatorFlex",children:(0,a.jsx)("span",{className:"SubTitle",children:"Params 參數:"})}),(0,a.jsxs)("div",{className:"flex flex-row",children:[(0,a.jsx)(r.Q,{lock:!1}),(0,a.jsx)("div",{className:"hintIcon ml-2 overflow-visible","data-tooltip-id":"ParamsHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]})]}):null,void 0!==b?(0,a.jsx)("div",{className:"mt-2 mb-2 max-w-[400px] flex flex-row [&>*]:mr-2 justify-end max-[400px]:justify-start",children:(0,a.jsxs)("div",{className:"flex flex-row mt-1",children:[(0,a.jsx)(w.A,{text:"開始匹配",handler:()=>(function(){let e=!1,s=0;if(A.some((l,a)=>l.subaffix===y?(q("第".concat(a+1,"個詞條:副詞條不可選擇與主詞條相同的詞條\n請再重新選擇!!"),"error"),e=!0,!0):"undefined"===l.subaffix||""===l.subaffix?(q("您還有副詞條沒有選擇\n請再重新選擇!!","error"),e=!0,!0):void(s+=l.count)),e)return;if(s<4||s>5)return void q("總強化次數只能為4或5次!","error");if(2!==A.filter((e,s)=>e.isSelect).length)return void q("您指定詞條數未滿2個!!","error");if(e)return;let a=new Set;for(let s of A){if(a.has(s.subaffix)){q("副詞條之間不可以選擇重複\n請再重新選擇!!","error"),e=!0;return}a.add(s.subaffix)}if(Q.forEach(s=>{Number(s.value)||(e=!0,alert("加權指數不可為空或其他非法型式"))}),e)return;let t=new Worker(l.tu(new URL(l.p+l.u(63),l.b))),i={MainData:y,SubData:A,partsIndex:b,standard:Q,limit:Y,enchanceCount:s};console.log(i),D(!1),L(!1),F(!1),$("數據計算處理中!!","process"),P(void 0),M({label:void 0,tag:void 0,color:void 0,value:void 0}),X(void 0),T(void 0),V(void 0),t.postMessage(i),t.onmessage=function(e){P(e.data.expRate),T(e.data.relicscore),X(e.data.returnData),M(e.data.relicrank);let s={main_affix:y,subaffix:[],type:b},l=A.map(e=>{let s={...e};return["生命值","攻擊力","防禦力","元素精通"].includes(s.subaffix)?s.display=s.data.toString():s.display=s.data+"%",s});s.subaffix=l,C(l),V(s),W.current=Q,K.current=Y,q("計算完畢!!","success"),L(!0),D(!0),F(!0)}})(),disabled:!_}),(0,a.jsx)(w.A,{text:"儲存紀錄",handler:()=>(function(){let l=localStorage.getItem(e),a=l?JSON.parse(l):null,t=H[b-1],i=h.A.find(e=>e.charId===s);if(a||(ee([]),a=[]),et(),!B||void 0===O||!E||void 0===R)return void q("當前沒有任何數據，不予儲存!!","error");if(!s)return void q("沒有選擇任何腳色!!","error");let r={version:1.2,char:i,part:t,mainaffix:y,expRate:O,score:R,rank:E,pieData:B,stand:W.current,relic:U,limit:K.current},x=[...a,r];localStorage.setItem(e,JSON.stringify(x)),el(r),q("紀錄已儲存","success"),D(!1)})(),disabled:!k})]})}):null]})]}),(0,a.jsxs)("div",{className:"w-[55%] ml-2 SectionBg rounded-md p-2 h-fit max-[1200px]:w-full max-[1200px]:ml-0 max-[1200px]:mt-2",children:[(0,a.jsxs)("div",{className:"flex flex-row items-baseline px-2 max-[600px]:justify-center",children:[(0,a.jsx)("span",{className:"text-red-600 text-lg font-bold",children:"過往紀錄"}),(0,a.jsx)("div",{className:"hintIcon ml-2 overflow-visible","data-tooltip-id":"HistoryHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]}),(0,a.jsx)("div",{className:"h-max max-h-[300px] overflow-x-scroll flex flex-row grayScrollBar max-[600px]:items-center",children:(0,a.jsx)(c.a,{})})]})]}),B?(0,a.jsx)("div",{className:"w-full my-2",children:(0,a.jsxs)("div",{className:"w-full flex flex-row SectionBg p-2 rounded-md flex-wrap",children:[(0,a.jsx)("div",{className:"rowWrap w-1/2 max-[800px]:w-full max-[500px]:w-4/5 max-[500px]:mx-auto",children:(0,a.jsx)(n.v,{})}),(0,a.jsx)("div",{className:"rowWrap w-1/2 max-[800px]:w-full max-[500px]:w-4/5 max-[500px]:mx-auto",id:"resultDetails",children:(0,a.jsx)(d.A,{})})]})}):null]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(f.m_,{id:"CharHint",place:"right-start",arrowColor:"gray",render:()=>(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-white",children:"選擇指定腳色，可以使用中文或英文關鍵字"}),(0,a.jsx)("span",{className:"text-white",children:"例如:霄宮→Yoimiya"})]})}),(0,a.jsx)(f.m_,{id:"PartSelectHint",place:"right-start",arrowColor:"gray",render:()=>(0,a.jsxs)("div",{className:"flex flex-col max-w-[230px]",children:[(0,a.jsx)("span",{className:"text-white",children:"選擇聖遺物部位"}),(0,a.jsx)("span",{className:"text-white",children:'"主詞條"跟"副詞條"區塊中會自動帶入該部位詞條種類'})]})}),(0,a.jsx)(f.m_,{id:"SubAffixHint",place:"right-start",arrowColor:"gray",render:()=>(0,a.jsx)(u,{})}),(0,a.jsx)(f.m_,{id:"ParamsHint",place:"right-start",arrowColor:"gray",render:()=>(0,a.jsx)(j.A,{})}),(0,a.jsx)(f.m_,{id:"HistoryHint",place:"top-start",arrowColor:"gray",render:()=>(0,a.jsx)(v.A,{})}),(0,a.jsx)(f.m_,{id:"SimulatorHint",place:"right-start",arrowColor:"gray",render:()=>(0,a.jsx)(p,{}),clickable:!0}),(0,a.jsx)(f.m_,{id:"LimitHint",place:"right-start",arrowColor:"gray",render:()=>(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:"指定詞條強化保底次數，可以根據個人目前使用強化情況調整"}),(0,a.jsx)("span",{children:"指定詞條們的共享保底次數，最低為2、最高為4"})]}),clickable:!0})]})]})};function b(){return(0,a.jsx)(S,{})}}},e=>{var s=s=>e(e.s=s);e.O(0,[375,30,224,704,874,339,687,907,441,684,358],()=>s(5194)),_N_E=e.O()}]);